"use strict";angular.module("birraApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","facebook","leaflet-directive"]).config(["$routeProvider",function(a){a.when("/breweries",{templateUrl:"views/brewerie.html",controller:"BrewerieCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/notifications",{templateUrl:"views/notifications.html",controller:"NotificationsCtrl"}).when("/events",{templateUrl:"views/events.html",controller:"EventsCtrl"}).when("/map",{templateUrl:"views/map.html",controller:"MapCtrl"}).otherwise({redirectTo:"/map"})}]),angular.module("birraApp").controller("AboutCtrl",["$scope",function(a){}]),angular.module("birraApp").controller("EventsCtrl",["$scope",function(a){a.events=[{title:"Título 1",description:"Descripción 1",image:"http://www.placehold.it/100x100"},{title:"Título 2",description:"Descripción 2",image:"http://www.placehold.it/100x100"},{title:"Título 3",description:"Descripción 3",image:"http://www.placehold.it/100x100"},{title:"Título 4",description:"Descripción 4",image:"http://www.placehold.it/100x100"}]}]),angular.module("birraApp").controller("NavigationCtrl",["$scope","$location",function(a,b){a.goToView=function(a){b.path(a)},a.isActive=function(a){return a==b.path()}}]),angular.module("birraApp").controller("NotificationsCtrl",["$scope",function(a){}]),angular.module("birraApp").factory("Brewerie",["$resource",function(a){return a("http://birra.herokuapp.com/api/v1/breweries/:id")}]),angular.module("birraApp").factory("Beer",["$resource",function(a){return a("http://birra.herokuapp.com/api/v1/beers/:id")}]),angular.module("birraApp").factory("Venue",["$resource",function(a){return a("http://birra.herokuapp.com/api/v1/venues/:id")}]),angular.module("birraApp").controller("MapCtrl",["$scope","Brewerie","Venue","leafletEvents",function(a,b,c,d){function e(b,c,d){null!==b.lat&&null!==b.lng&&(a.markers[c+"_"+b.id]={lat:parseFloat(b.lat),lng:parseFloat(b.lng),model:b,icon:f(c,d,"normal"),type:c,subType:d})}function f(a,b,c){return{iconUrl:(i[a][b]||i[a]["default"])[c],iconSize:[38,49],iconAnchor:[19,42]}}function g(b){h(),a.selectedMarker=b,a.markers[b.type+"_"+b.model.id].icon=f(b.type,b.subType,"selected")}function h(){if(a.selectedMarker){var b=a.selectedMarker;a.markers[b.type+"_"+b.model.id].icon=f(b.type,b.subType,"normal"),a.selectedMarker=null}}angular.extend(a,{selectedMarker:null,montevideo:{lat:-34.9,lng:-56.18,zoom:12},markers:{},events:{markers:{enable:d.getAvailableMarkerEvents()}},defaults:{scrollWheelZoom:!1}});var i={brewery:{"default":{normal:"images/pin-brewery.fe364f50.svg",selected:"images/pin-selected.61cb1eab.svg"}},venue:{Brewpub:{normal:"images/pin-bar.05e66c0a.svg",selected:"images/pin-selected.61cb1eab.svg"},Tienda:{normal:"images/pin-store.49731b9e.svg",selected:"images/pin-selected.61cb1eab.svg"},Bar:{normal:"images/pin-bar.05e66c0a.svg",selected:"images/pin-selected.61cb1eab.svg"},Restaurant:{normal:"images/pin-bar.05e66c0a.svg",selected:"images/pin-selected.61cb1eab.svg"},"default":{normal:"images/pin-bar.05e66c0a.svg",selected:"images/pin-selected.61cb1eab.svg"}}};b.query(function(a){angular.forEach(a,function(a){e(a,"brewery",a.brewery_type)})}),c.query(function(a){angular.forEach(a,function(a){e(a,"venue",a.venue_type)})}),a.$on("leafletDirectiveMarker.click",function(a,b){g(b.model)}),a.$on("leafletDirectiveMap.click",function(){h()})}]),angular.module("birraApp").directive("navigation",function(){return{templateUrl:"views/navigation.html",restrict:"E",controller:"NavigationCtrl"}}),angular.module("birraApp").directive("navigationHeader",function(){return{templateUrl:"views/navigation-header.html",restrict:"E",controller:"NavigationHeaderCtrl"}}),angular.module("birraApp").controller("NavigationHeaderCtrl",["$scope",function(a){}]),angular.module("birraApp").directive("beer",function(){return{templateUrl:"views/beer.html",restrict:"E",scope:{name:"=name",id:"=id",description:"=description",image:"=image"},controller:"BeerCtrl"}}),angular.module("birraApp").directive("event",function(){return{templateUrl:"views/event.html",restrict:"E",scope:{event:"=event"},controller:"EventsCtrl"}}),angular.module("birraApp").directive("venueMapInfo",function(){return{templateUrl:"views/venue-map-info.html",scope:{venue:"="},link:function(a){a.imageSrc=function(){return a.venue.photo_prefix+"height70"+a.venue.photo_suffix},a.showImage=function(){return a.venue.photo_prefix},a.name=function(){return a.venue.name},a.address=function(){return a.venue.address}},restrict:"E"}}),angular.module("birraApp").controller("BeerCtrl",["$scope",function(a){}]),angular.module("birraApp").controller("BrewerieCtrl",["$scope","Brewerie",function(a,b){b.query(function(b){a.breweries=b})}]);